# PCA_Recognize
PCA人脸识别流程
代码稍后上传

人脸识别是一个有监督学习过程，首先利用训练集构造一个人脸模型，然后将测试集与训练集进行匹配，找到与之对应的训练集头像。最容易的方式是直接利用欧式距离计算测试集的每一幅图像与训练集的每一幅图像的距离，然后选择距离最近的图像作为识别的结果。这种直接计算距离的方式直观，但是有一个非常大的缺陷—计算量太大。如果每幅图像大小为100*100，训练集大小1000，则识别测试集中的一幅图像就需要1000*100*100的计算量，当测试集很大时，识别速度非常缓慢。
解决上述问题的一个途径是对图像进行降维，通过只保留某些关键像素可以使识别速度大大提升。降维的一个方法即是PCA（主成分分析），在此我们介绍通过PCA进行人脸识别的步骤。
1 读取训练集图像数据
读取测试集目录下指定个数的图像，然后将其保存在一个二维数组中。如果图像个数为m，图像长宽为i、j，则我们创建一个二维数组A[m][i*j=n]用来保存图像数据。数组的每一行表示一个图像的所有像素信息，每一列表示一个随机变量，也即不同图像同一位置的像素信息，降维也即用更少的列来代表图像。
2 每列减去均值
将步骤一的每列减去该列的均值，这样每列的数据均值为0。在利用matlab的函数princomp执行PCA的过程中，princomp会首先将每一列减去该列均值，不用我们自己执行。
3 计算协方差矩阵
协方差矩阵表示不同随机变量之间的相互关系，图像中也即求任意两个像素之间的关系。如果两个随机变量的协方差为正或为负，表明两个变量之间具有相关性，如果为零表示两个变量不相关。通过计算协方差矩阵，我们就可以获得不同像素之间的关系。针对人脸识别，计算的协方差矩阵大小为n*n，其中n表示图像的像素点个数。
4 计算协方差矩阵的特征值和特征向量
由于协方差矩阵是实对称阵，所以可以求得其所有的特征值和特征向量，其共有n个特征值和特征向量。
5 选择主成分
所谓主成分即是具有最大特征值的特征向量，所以我们需要将特征向量按照特征值由大到小排序，然后根据精度要求选择不同数量的特征向量，例如我们选择了前p个特征向量，通常p远小于n（在我们的人脸识别实验中，为了达到95%的精度，p只有72，而n为120*140=17040）。
6 将训练集进行降维
此步骤将原始的训练集进行降维变换，原始的图像数据是m*n的矩阵，只包含主成分的特征向量构成一个n*p的矩阵（每一列都是一个特征向量）。将两个矩阵相乘，我们即可获得降维之后的图像矩阵m*p，这个矩阵远小于原始的图像数据。
7 将测试集进行降维
同步骤6相似，读取所有的测试集图像，然后对其也进行降维操作。如果测试集有M幅图像，则降维后的矩阵为M*p。
8 人脸识别
       该步骤为人脸识别的最后一步，用来对测试集进行识别，并计算识别准确率。该步骤有一个限制，测试集中的头像必须包含在训练集中，否则得出的结果将没有意义（这也就是代码一开始要求训练集大于测试集的目的）。识别的方法和最初的图像匹配方法类似：将测试集中的每一幅降维图像与降维的训练集进行匹配，然后将其分类到距离最小的训练集头像中，如果两个头像表示一个人，表示识别成功，否则表示识别失败。与原始的匹配相比，由于对图像进行了降维，所以匹配速度大大提升，在我们的实验中速度提升了200以上（120*142/72）。
